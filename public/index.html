<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<!-- <meta http-equiv="content-type" content="text/html"> -->
		<title>disCount - a discursive encounter</title>
		<link rel="stylesheet" href="./public/styles.css">
		<script src="../bower_components/platform/platform.js"></script>
		<link rel="import" href="./elements/spoiler-alert.html">
		<link rel="import" href="./elements/discount-room.html">
		<style>
			:unresolved {
				opacity: 0;
			}
		</style>
	</head>
	<body>
		<!-- <spoiler-alert undo="fuck">Ned Stark dies</spoiler-alert> -->
		<discount-room id="room"></discount-room>
		<script src="/socket.io/socket.io.js"></script>
		<script>
			document.addEventListener('polymer-ready', function(){
				var socket = io.connect("http://discountapp-cfk.rhcloud.com:8000");
				var room = document.querySelector('#room');
				socket.on('uuid', function(e){
					room.user = e.uuid;
				});
				socket.on('prepopulate', function(payload){
					room.fire('pre-pop', payload);
				});
				socket.on('newCharAdded', function(payload){
					room.fire('new-char', payload);
				});
				socket.on('movedUser', function(payload){
					room.fire('moved-user', payload);
				});
				socket.on('consoleMsg', function(payload){
					room.fire('console-msg', payload);
				});
				socket.on('consoleReturn', function(payload){
					room.fire('console-return', payload);
				});
				socket.on('userLeaving', function(payload){
					room.fire('user-left', payload);
				});

			});
		</script>
	</body>
</html>